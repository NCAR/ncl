#
#
#	$Id: yMakefile,v 1.31 1997-05-14 23:08:13 boote Exp $
#
#
#	Makefile for libncarg_c -- NCAR G common utilities
#
#

MYNAME		= libncarg_c

#if defined(CRAY)

EXCSRCS = logic64.c
EXFSRCS = gbytes.f sbytes.f
EXOBJS  = gbytes.o sbytes.o logic64.o

#elif defined(alpha)

EXCSRCS = bcopyswap.c logic32.c
EXFSRCS = gbytes.f sbytes.f
EXOBJS  = bcopyswap.o gbytes.o sbytes.o logic32.o

#elif defined(sun3) || defined(sun4) 
EXCSRCS = gsbytes.c logic32.c
EXOBJS = gsbytes.o logic32.o

#elif (defined(ultrix) && defined(RISC))
EXCSRCS = bcopyswap.c s_abort.c gsbytes.c logic32.c
EXOBJS  = bcopyswap.o s_abort.o gsbytes.o logic32.o

#elif  (defined(IRIX64))

EXCSRCS = sbytes.f gbytes.f logic32.c
EXOBJS  = sbytes.o gbytes.o logic32.o

#elif (defined(linux))

EXCSRCS = bcopyswap.c gsbytes.c logic32.c
EXOBJS  = bcopyswap.o gsbytes.o logic32.o

SHLIBSRCS = g77.c
SHLIBOBJS = g77.o

#else

EXCSRCS = gsbytes.c logic32.c
EXOBJS  = gsbytes.o logic32.o

#endif

FCPP_SRCS = i1mach.F r1mach.F argget.F
FCPP_FSRCS = i1mach.f r1mach.f argget.f
FCPP_OBJS = i1mach.o r1mach.o argget.o

HDRS		= c.h 
CSRCS		= $(EXCSRCS) options.c misc.c ncarg_path.c version.c \
			error.c atoargv.c usleep.c env.c trnspprt.c \
			rwchinfl.c
FSRCS		= $(EXFSRCS) $(FCPP_FSRCS) lblank.f iargct.f
OBJS		= $(EXOBJS) $(FCPP_OBJS) options.o misc.o ncarg_path.o \
		version.o error.o atoargv.o usleep.o env.o trnspprt.o lblank.o \
		iargct.o rwchinfl.o

#if (defined(IRIX) && (MAJOR == 5)) || (defined(IRIX64) || (MAJOR == 6))
MY_DEFINES = -D_BSD_TYPES
#endif

EXTRA_CDEFINES =	$(OS_DEF) $(VENDOR_DEF) $(VDEFINE) $(NGENVDEF) $(MY_DEFINES) -DNCARGURL='$(NCARGURL)'

REQLIBS = $(CTOFLIBS) -lc

LibraryTarget($(MYNAME),$(OBJS))
InstallTarget($(HDRS),$(INSTALL_INC),$(NCARGINCPATH))
BuildIncludes($(HDRS),ncarg,..)
DependTarget($(CSRCS))
CleanFilesTarget($(FCPP_FSRCS))

BuildSharedLibTarget(libNGc,$(OBJS) $(SHLIBOBJS),1,0,$(REQLIBS))
